port_in_redirect    off;
tcp_nopush          on;
tcp_nodelay         on;
    
## Flood protection example ##

limit_req_zone $binary_remote_addr zone=search:25m rate=1r/s;
limit_req_zone $binary_remote_addr zone=account:25m rate=1r/s;
limit_req_zone $binary_remote_addr zone=checkout:25m rate=1r/s;

## Cache open FD ##

open_file_cache max=10000 inactive=3600s;
open_file_cache_valid 7200s;
open_file_cache_min_uses 2;

## Gzipping additional config ##

gzip_proxied        any;
gzip_buffers        16 8k;
gzip_comp_level     5;
